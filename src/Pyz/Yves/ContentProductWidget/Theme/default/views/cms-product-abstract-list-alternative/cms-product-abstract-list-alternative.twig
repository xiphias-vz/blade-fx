{% extends template('widget') %}

{% define data = {
    productAbstractViewCollection: productAbstractViewCollection,
} %}

{% block body %}
    <div class="grid grid--stretch">
        {% for productAbstractView in data.productAbstractViewCollection %}
            {% embed molecule('product-item') with {
                class: 'col col--sm-6 col--lg-3',
                data: {
                    product: productAbstractView,
                },
            } only %}
                {% block body %}
                    <div class="{{ config.name }}__container {{ config.name }}__container--title-top">
                        {% block content %}
                            <a href="{{ data.url }}" class="{{ config.name }}__info grid grid--justify grid--top grid--no-wrap">
                                {% block name %}
                                    <div class="col col--md-8 col--sm-12">
                                        {{ data.name }}
                                    </div>
                                {% endblock %}

                                {% block price %}
                                    <div class="col col--md-4 col--sm-12">
                                        {% include molecule('money-price') with {
                                            modifiers: ['align-right'],
                                            data: {
                                                amount: data.product.prices.DEFAULT | default(null),
                                                originalAmount: data.product.prices.ORIGINAL | default(null),
                                                currencyIsoCode: data.currencyIsoCode,
                                            },
                                        } only %}
                                    </div>
                                {% endblock %}
                            </a>
                        {% endblock %}

                        <div class="{{ config.name }}__image-wrap">
                            {% block image %}
                                <a
                                    href="{{ data.url }}"
                                    class="{{ config.name }}__overlay js-product-color-group__image-{{ data.idProductAbstract }}"
                                >
                                    {% include molecule('lazy-thumbnail') with {
                                        modifiers: ['no-margin'],
                                        attributes: {
                                            alt: data.name,
                                            src: data.image,
                                        },
                                    } only %}
                                </a>
                            {% endblock %}

                            {% block labels %}
                                {% widget 'ProductAbstractLabelWidget' args [data.idProductAbstract] only %}{% endwidget %}
                            {% endblock %}
                        </div>
                    </div>
                {% endblock %}
            {% endembed %}
        {% endfor %}
    </div>
{% endblock %}
