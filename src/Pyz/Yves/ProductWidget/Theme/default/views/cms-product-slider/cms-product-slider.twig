{% extends template('widget') %}

{% define data = {
    product: _widget.product
} %}
{% block body %}
    {% embed molecule('product-item') with {
        class: 'col col--sm-12 col--md-6 col--lg-4',
        modifiers: ['stretch'],
        data: {
        product: data.product,
    },
        } only %}
        {% block rating %}
            {% include molecule('rating-selector', 'ProductReviewWidget') ignore missing with {
                data: {
                    value: data.product.rating.averageRating | default(0),
                    reviewCount:  data.product.rating.totalReview | default(0),
                    useHalfSteps: true,
                    parentJsName: config.jsName,
                },
                attributes: {
                    readonly: true,
                },
            } only %}
        {% endblock %}
    {% endembed %}
    <script type="text/javascript">
        window.dataLayer = window.dataLayer || [];
        var impressions =  window.catalogList;
        window.dataLayer.push({
            'event': 'eec.POP',
            'ecommerce':
                {
                    'currency': 'EUR',
                    impressions,
                }
        });
    </script>
{% endblock %}
