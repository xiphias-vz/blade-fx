{% extends organism('side-drawer', '@SprykerShop:ShopUi') %}

{% define data = {
    merchant: app['merchant_name'],
    currentCodeBucket: app.currentCodeBucket,
} %}

{% block body %}
    <div class="{{ config.name }}__overlay {{ attributes['trigger-selector'] }}"></div>

    <aside class="{{ component.renderClass(config.name ~ '__drawer', modifiers) }}">
        {% block topBar %}
            <div class="{{ config.name }}__top-bar grid grid--middle spacing-left spacing-left--inner">
                {% block widgets %}
                    {% widget 'StoreSwitcherWidget' %}{% endwidget %}

                {% endblock %}

                {% block close %}
                    <button
                        class="col button button--skinless button--close-drawer {{ config.name }}__close {{ attributes['trigger-selector'] }}">
                        {% include atom('icon') with {
                            modifiers: ['big'],
                            data: {
                                name: 'close',
                            },
                        } only %}
                    </button>
                {% endblock %}
            </div>
        {% endblock %}

        {% block contentWrap %}
            <div class="{{ config.name }}__content">
                {% block content %}
                    {% if data.merchant %}
                        <span class="{{ config.name }}__merchant">
                            {{ data.merchant }}
                        </span>
                    {% endif %}

                    <div class="{{ config.name }}__navigation">
                        <a id="link-to-time-slots-mobile" class="{{ config.name }}__navigation-item link link--reset-focus">
                            <span class="icon-time"></span>
                            {{ 'header.timeslot.button' | trans }}
                        </a>

                        <div class="hr-line-solid"></div>
                        {% if data.currentCodeBucket=='CZ' %}
                            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                                <a href="{{ url('customer/overview') }}"
                                   class="{{ config.name }}__navigation-item link link--reset-focus">
                                    {% include atom('icon') with {
                                        modifiers: ['small'],
                                        class: 'link__icon',
                                        data: {
                                            name: 'user-account',
                                        },
                                    } only %}
                                    {{ 'customer.profile.link' | trans }}
                                </a>
                            {% else %}
                                <a class="{{ config.name }}__navigation-item link link--reset-focus link-to-login-modal">
                                    {% include atom('icon') with {
                                        modifiers: ['small'],
                                        class: 'link__icon',
                                        data: {
                                            name: 'user-account',
                                        },
                                    } only %}
                                    {{ 'customer.profile.link' | trans }}
                                </a>
                            {% endif %}
                        {% elseif data.currentCodeBucket=='DE' %}
                            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                                <a href="{{ url('customer/overview') }}"
                                   class="{{ config.name }}__navigation-item link link--reset-focus">
                                    {% include atom('icon') with {
                                        modifiers: ['small'],
                                        class: 'link__icon',
                                        data: {
                                            name: 'user-account',
                                        },
                                    } only %}
                                    {{ 'customer.profile.link' | trans }}
                                </a>
                            {% else %}
                                <a class="{{ config.name }}__navigation-item link link--reset-focus link-to-login-modal">
                                    {% include atom('icon') with {
                                        modifiers: ['small'],
                                        class: 'link__icon',
                                        data: {
                                            name: 'user-account',
                                        },
                                    } only %}
                                    {{ 'customer.profile.link' | trans }}
                                </a>
                            {% endif %}
                        {% endif %}

                        <a href="{{ 'page.fragen.url' | trans }}" class="{{ config.name }}__navigation-item link link--reset-focus" target="_blank">
                            {% include atom('icon') with {
                                modifiers: ['small'],
                                class: 'link__icon',
                                data: {
                                    name: 'help',
                                },
                            } only %}
                            {{ 'global.help' | trans }}
                        </a>

                        {% if is_granted('ROLE_USER') %}
                            <a href="{{ url('logout') }}"
                               class="{{ config.name }}__navigation-item link link--reset-focus">
                                {% include atom('icon') with {
                                    modifiers: ['small'],
                                    class: 'link__icon',
                                    data: {
                                        name: 'logout',
                                    },
                                } only %}
                                {{ 'customer.logout' | trans }}
                            </a>
                        {% else %}
                            <a href="{{ url('login') }}"
                               class="{{ config.name }}__navigation-item link link--reset-focus">
                                {% include atom('icon') with {
                                    modifiers: ['small'],
                                    class: 'link__icon',
                                    data: {
                                        name: 'login',
                                    },
                                } only %}
                                {{ 'customer.login' | trans }}
                            </a>
                        {% endif %}

                        {% if data.currentCodeBucket=='DE' %}
                            <div class="hr-line-solid"></div>

                            <a href="https://www.globus.de/" target = "_blank" class = "{{ config.name }}__navigation-item link link--reset-focus">
                                <img src="{{ publicPath('images/meinmarkt_mobile.svg') }}" class="{{ config.name }}__icon"/>
                                {{ 'my_market.link' | trans }}
                            </a>
                            <a href="https://www.globus.de/produkte/" target = "_blank" class = "{{ config.name }}__navigation-item link link--reset-focus">
                                <img src="{{ publicPath('images/sortiment_mobile.svg') }}" class="{{ config.name }}__icon"/>
                                {{ 'product.find' | trans }}
                            </a>
                        {% endif %}

                    </div>
                {% endblock %}

                {% block bottomBar %}
                    <div class="{{ config.name }}__bottom-bar">
                    </div>
                {% endblock %}
            </div>
        {% endblock %}
    </aside>
{% endblock %}
