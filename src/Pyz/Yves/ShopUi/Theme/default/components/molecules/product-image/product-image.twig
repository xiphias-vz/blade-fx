{% extends model('component') %}

{% define config = {
    name: 'product-image'
} %}

{% define data = {
    name: '',
    image: null
} %}

{% set defaultImage = publicPath("/images/kein_bild_vorhanden.png") %}

{% block body %}

    {% if data.image is defined %}
        {% set displayImage = data.image %}
    {% else %}
        {% set displayImage = defaultImage %}
    {% endif %}

    {% block labels %}
        {% if (data.productItem.originalPrice is defined and data.productItem.unitGrossPrice < data.productItem.originalPrice) %}

            {% set labels = labels | default([]) %}

            {% if not data.product.id_product_labels is defined or data.product.id_product_labels|length <= 0 %}
                {% set labels = labels | merge([{
                    text: '%',
                    type: 'highlight',
                    product_type: '',
                }]) %}

                {% include molecule('label-group', 'ProductLabelWidget') with {
                    data: {
                        labels: labels,
                        parentJsName: '',
                    },
                } only %}
            {% endif %}
        {% endif %}
    {% endblock %}

    {% include molecule('lazy-thumbnail') with {
        modifiers: ['small'] | merge(modifiers),
        attributes: {
            alt: data.name,
            src: displayImage,
        },
    } only %}

{% endblock %}
