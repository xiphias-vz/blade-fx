{% extends model('component') %}

{% define config = {
    name: 'order-item-abholung',
    tag: 'order-item-abholung',
} %}

{% define data = {
    reference: required,
    productsCount: required,
    date: '',
    deadline: required,
    dayOfTheWeek: '',
    detailPage: false,
    isSubstitutionAllowed: false,
    isDepositAllowed: false,
    isTransportboxEnabled: false,
    orderReference: '',
    fullName: data.fullName,
    numberOfOrders: '',
    meinGlobusCart: '',
    queuedTime: '',
    calculatedWaitingTime: '',
    isOrderInQueue: '',
    numberOfContainers: '',
    isCollectionOrderFinished: false,
} %}

{% block body %}
    <input type="hidden" id="calculatedWaitingTime" value="{{ data.calculatedWaitingTime }}">
    <input type="hidden" id="containerNotPartOfOrder" value="{{ 'container.not.part.order' | trans }}">
    <div class="{{ component.renderClass('box', modifiers) }} order-item-abholung__pickup">
        {% if data.detailPage %}
            <div class="{{ config.name }}__header-content">
                <div class="{{ config.name }}__header-content-inner">
                    <div class="icon-substitution">
                        {% if data.isSubstitutionAllowed %}
                            {% include atom('icon') with {
                                modifiers: ['big'],
                                class: 'custom__icon',
                                data: {
                                    name: 'icon-substitutes',
                                },
                            } only %}
                            {% else %}
                                {% include atom('icon') with {
                                    modifiers: ['big'],
                                    class: 'custom__icon',
                                    data: {
                                        name: 'icon-not-substitutes',
                                    },
                                } only %}
                        {% endif %}
                    </div>


                    {% if data.isDepositAllowed %}
                        <div class="greenIcon" >
                            {% include atom('icon') with {
                                modifiers: ['big'],
                                class: 'custom__icon',
                                data: {
                                    name: 'icon-green',
                                },
                            } only %}
                        </div>
                    {% endif %}

                    <div>
                        <input type="hidden" id="isOrderInQueue" value="{% if data.isOrderInQueue %}1{% else %}0{% endif %}">
                    </div>
                    <div>
                        {% if data.orderReference %}
                            <div class="{{ config.name }}__order-reference">
                                <span class="order-reference-label">Bestellnr: {{ data.orderReference }}</span>
                            </div>
                        {% endif %}
                    </div>
                    <div class="{{ config.name }}__time {{ config.name }}__details-time">
                        {% if data.date %}
                            {{ data.dayOfTheWeek }} {{ data.date | replace('/', '.') }}
                        {% endif %}
                        <span>{{ data.deadline }}</span>
                    </div>
                    <div class="{{ config.name }}__customer-info {{ config.name }}__customer-info-details">
                        {% if data.meinGlobusCart %}
                            <p>{{ data.fullName }} - MG</p>
                        {% else %}
                            <p>{{ data.fullName }}</p>
                        {% endif %}

                        {% if data.numberOfOrders < 2 %}
                            <p>{{ data.numberOfOrders }} - {{ 'first.customer' | trans }}</p>
                        {% else %}
                            <p>{{ data.numberOfOrders }}</p>
                        {% endif %}
                    </div>
                </div>
                <div class="hr-line-solid"></div>
                {% block additionalFields %}{% endblock %}
            </div>

        {% else %}
            <div class="{{ config.name }}__index-page">
                <div class="{{ config.name }}__holder">
                    <input type="hidden" id="lastOrderInQueue" value="">
                    {% if data.reference %}
                        <div class="{{ config.name }}__order-reference">
                            <span class="{{ config.name }}__order-reference-label">Bestellnr: {{ data.reference }}</span>
                        </div>
                        <div class="{{ config.name }}__time-and-container">
                            <div class="{{ config.name }}__queued-time">{{ data.queuedTime }}</div>
                            <div class="{{ config.name }}__container-number">{{ data.numberOfContainers }}</div>
                        </div>
                    {% endif %}
                </div>
                <div class="hr-line-solid  {{ config.name }}__hr-line"></div>
                <div class="{{ config.name }}__time {{ config.name }}__time-padding">
                    <div class="{{ config.name }}__time-deadline">
                        {% if data.date %}
                            {{ data.dayOfTheWeek }} {{ data.date | replace('/', '.') }}
                        {% endif %}
                        <span class="{{ config.name }}__deadline">{{ data.deadline }}</span>
                        {% block customerName %}{% endblock %}
                    </div>
                    {% block orderDetailsForm %}{% endblock %}
                </div>
                    {% block additionalContent %}{% endblock %}
            </div>
        {% endif %}
    </div>
{% endblock %}
