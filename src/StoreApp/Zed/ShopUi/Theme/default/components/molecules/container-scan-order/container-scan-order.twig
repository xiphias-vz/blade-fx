{% extends model('component') %}

{% define config = {
    name: 'container-scan-order',
    tag: 'container-scan-order'
} %}

{% define data = {
    idOrderReference: 0,
    itemSku: 0,
    usedContainersWithShelf:[],
    nextOrderPosition: 0,
    orderPosition: 0,
    orderItemPosition: 0,
    pickingColor:[],
    requestFromPickingArticles: '',
    redirectToPickingArticles: '',
    isContainerUsed: '',
    isDepositAllowed: false,
    addContainerToSubstitutedItem: '',
} %}

{% block body %}
    {% embed molecule('popup-ui-error') with {
        data: {
            isErrorTrue: 0,
            isPopUpErrorForPickingArticles: 2,
            buttons: {
                submit: {
                    isButton: true,
                    additionalClass: 'js-pick-products__submit',
                },
            },
        },
    } only %}

         {% block content %}
            <input type="hidden" id="containerID_eighth_characters_set" value="{{ 'containerID.eighth.characters.set' | trans }}">
            <input type="hidden" id="please_scan_container" value="{{ 'container.scan.order.please' | trans }}">
            <input type="hidden" id="container_scan_order_error_pop-up_1" value="{{ 'container.scan.order.error.pop-up_1' | trans }}">
            <input type="hidden" id="container_scan_order_error_pop-up_2" value="{{ 'container.scan.order.error.pop-up_2' | trans }}">
            <input type="hidden" id="container_scan_order_error_pop-up_3" value="{{ 'container.scan.order.error.pop-up_3' | trans }}">
            <input type="hidden" id="container_scan_order_error_pop-up_4" value="{{ 'container.scan.order.error.pop-up_4' | trans }}">
            <input type="hidden" id="container_scan_order_error_pop-up_5" value="{{ 'container.scan.order.error.pop-up_5' | trans }}">
            <div class="popup-error-holder">
                <div class="error-status">{{ 'error_page.title' | trans }}</div>
                <div class="error-info">
                    <p class="container-name">{{ 'container.scan.order.error.pop-up_1' | trans }} <span></span></p>
                    <p class="container-desc">{{ 'container.scan.order.error.pop-up_2' | trans }} </p>
                    <p class="container-order">{{ 'container.scan.order.error.pop-up_4' | trans }} <span></span></p>
                </div>
            </div>
         {% endblock %}
    {% endembed %}

    <div class="bin-icon-holder" style="display: none">
        {% include atom('icon') with {
            modifiers: ['big'],
            class: 'custom__icon',
            data: {
                name: 'icon-delete',
            },
        } only %}
    </div>
    <form id="frm_scanContainerOrder" method="post" >
        <input type="hidden" name="formAddContainerSku" value="{{ data.requestFromPickingArticles }}">
        <input type="hidden" name="redirectToPickingArticles" value="{{ data.redirectToPickingArticles }}">
        <input type="hidden" name="idContainers" value="[]">
        <input type="hidden" name="itemSku" value="{{ data.itemSku }}">
        <input type="hidden" name="orderPosition" value="{{ data.orderPosition }}">
        <input type="hidden" name="orderItemPosition" value="{{ data.orderItemPosition }}">
        <input type="hidden" name="nextOrderPosition" value="{{ data.nextOrderPosition }}">
        <input type="hidden" name="isContainerUsed" value="{{ data.isContainerUsed }}">
        <input type="hidden" name="addContainerToSubstitutedItem" value="{{ data.addContainerToSubstitutedItem }}">
        <div class="box">
            <div class="sub-box">
                <p style="font-weight: bold;margin: 0">{{ 'picking.app.containers.select.title' | trans }}</p>
                <div class="list-containers-shelf" style="margin-bottom: 20px">
                    {% for container in data.usedContainersWithShelf %}
                        <p>
                           <span>{{ container.zoneAbbrevation }}</span> > <span>{{ container.containerID }}</span> > <span style="font-weight: bold">{{ container.shelfID }}</span>
                        </p>
                        {% if container.hasSubstitutedItem == true %}
                            <p>
                            <span>{{ container.containerID }}
                                </span>  >
                                <span style="font-weight: bold">{{ container.shelfID }}</span>{% include atom('icon') with {
                                    modifiers: ['big'],
                                    data: {
                                        name: 'icon-substitutes',
                                    },
                                } only %}</p>
                        {% else %}
                            <p>
                                <span>{{ container.containerID }}</span> > <span style="font-weight: bold">{{ container.shelfID }}</span>
                            </p>
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="input-scanner-holder">
                    <div class="grid grid--no-wrap">
                        <div class="col col--expand">
                            <label for="input_scanner" style="font-weight: bold;margin-bottom: 10px">{{ 'picking.app.containers.scan.for.container' | trans }} <span class="order-reference-holder">{{ data.idOrderReference }}</span></label>
                            <input id="input_scanner" type="text" class="input input--expand spacing-bottom spacing-bottom--big" placeholder="{{ 'picking.app.containers.scan.container' | trans }}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="list-containers-holder"></div>
            <div class="checkbox-holder" style="padding-left: 1rem;">
                {% include atom('checkbox') with {
                } only %}
                <div class="label-for-checkbox">
                    <span class="description">{{ 'picking.app.containers.all.packs.container' | trans }}</span>
                    <span>
                         {% include atom('circle') with {
                             data: {
                                 content: data.pickingColor.idColor,
                                 backgroundColor: data.pickingColor.backColor,
                                 paddingLeft: '13px',
                                 paddingTop: '4px',
                                 textColor: data.pickingColor.foreColor
                             }
                         } only %}
                    </span>
                </div>
            </div>
        </div>

        {% if data.isDepositAllowed == true %}
            {% set btnContinueType = 'button' %}
            {% set btnContinueClass = 'popup-ui-deposit__open' %}

            {% embed molecule('popup-ui-deposit') with {
                data: {
                    isDepositAllowed: data.isDepositAllowed,
                    buttons: {
                        submit: {
                            isButton: true,
                            additionalClass: 'js-container-scan-order__submit',
                        },
                    },
                },
            } only %}
            {% endembed %}
        {% else %}
            {% set btnContinueType = 'submit' %}
            {% set btnContinueClass = '' %}
        {% endif %}

        {% block button %}
            <div id="confirm-scan-containers" class="text-center" style="margin-top:20px">
                <button type="{{ btnContinueType }}" class="button button--expand button--disabled js-pick-products__submit-button {{ btnContinueClass }}">
                    {{ 'picker.picking.confirmation' | trans }}
                </button>
            </div>
        {% endblock %}
    </form>
{% endblock %}
