env:
    APPLICATION_ENV: devtest

sections:

    generate:
        generate-transfers:
            command: "vendor/bin/console transfer:generate"

        generate-transfer-databuilders:
            command: "vendor/bin/console transfer:databuilder:generate"

        generate-ide-auto-completion:
            command: "vendor/bin/console dev:ide:generate-auto-completion"

        rest-api-generate-documentation:
            command: "vendor/bin/console rest-api:generate:documentation"

    cache:
        router-cache-warmup-yves:
            command: "vendor/bin/yves router:cache:warm-up"

        router-cache-warmup-zed:
            command: "vendor/bin/console router:cache:warm-up"

        twig-cache-warmup:
            command: "vendor/bin/console twig:cache:warmer"

        navigation-cache-warmup:
            command: "vendor/bin/console navigation:build-cache"

        rest-request-validation-cache-warmup:
            command: "vendor/bin/console glue:rest:build-request-validation-cache"

    queue-flush:
        set-permissions:
            command: "vendor/bin/console queue:permission:set"
            stores: true

        purge-all-queues:
            command: "vendor/bin/console queue:queue:purge-all"
            stores: true

        delete-all-queues:
            command: "vendor/bin/console queue:queue:delete-all"
            stores: true

        delete-all-exchanges:
            command: "vendor/bin/console queue:exchanges:delete-all"
            stores: true


    database-flush:
        drop-database:
            command: "vendor/bin/console propel:database:drop"
        delete-migration-files:
            command: "vendor/bin/console propel:migration:delete"


    database-migrate:
        propel-create:
            command: "vendor/bin/console propel:database:create"

        propel-postgres-compatibility:
            command: "vendor/bin/console propel:pg-sql-compat"

        propel-postgres-index-remover:
            command: "vendor/bin/console propel:postgres-indexes:remove"

        propel-copy-schema:
            command: "vendor/bin/console propel:schema:copy"

        propel-postgres-index-generator:
            command: "vendor/bin/console propel:postgres-indexes:generate"

        propel-copy-and-merge-with-generated-indices:
            command: "vendor/bin/console propel:schema:copy"

        propel-build:
            command: "vendor/bin/console propel:model:build"

        propel-diff:
            command: "vendor/bin/console propel:diff"

        propel-migrate:
            command: "vendor/bin/console propel:migrate"

        generate-entity-transfer:
            command: "vendor/bin/console transfer:entity:generate"

        init-database:
            command: "vendor/bin/console setup:init-db"

        setup-search-create-sources:
            command: "vendor/bin/console search:setup:sources"

        setup-seach-create-source-map:
            command: "vendor/bin/console search:setup:source-map"


    setup-test:
        codeception-build:
            command: "vendor/bin/codecept build --ansi"

        databuilder-generate:
            command: "vendor/bin/console transfer:databuilder:generate"

    demodata:
        local-env-data-restore:
            command: "vendor/bin/install -r local-env-data-restore"

        import:
            command: "vendor/bin/console data:import"

        import-product-location-1004:
            command: "vendor/bin/console data:import product-location -f spryker/90.globus_article_location.03_1004.csv"

        import-product-location-1031:
            command: "vendor/bin/console data:import product-location -f spryker/90.globus_article_location.03_1031.csv"

        import-product-location-1042:
            command: "vendor/bin/console data:import product-location -f spryker/90.globus_article_location.03_1042.csv"

        import-product-location-1057:
            command: "vendor/bin/console data:import product-location -f spryker/90.globus_article_location.03_1057.csv"

        update-product-labels:
            command: "vendor/bin/console product-label:relations:update"

        local-env-data-reset:
            command: "vendor/bin/install -r local-env-data-reset"

    queue:
        run-worker:
            command: "vendor/bin/console queue:worker:start --stop-when-empty"


    frontend:
        dependencies-install:
            command: "vendor/bin/console frontend:project:install-dependencies"

        yves-install-dependencies:
            command: "vendor/bin/console frontend:yves:install-dependencies"

        yves-build-frontend:
            command: "vendor/bin/console frontend:yves:build"

        zed-install-dependencies:
            command: "vendor/bin/console frontend:zed:install-dependencies"

        zed-build-frontend:
            command: "vendor/bin/console frontend:zed:build"
